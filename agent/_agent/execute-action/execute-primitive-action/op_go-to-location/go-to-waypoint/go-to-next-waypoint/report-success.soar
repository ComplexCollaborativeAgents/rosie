sp {go-to-next-waypoint*propose*report-success*drive-xy
   (state <s> ^name go-to-next-waypoint
              ^current-action.drive-command.status success
              ^current-action.position-set.next.next none)
-->
   (<s> ^operator <o> +)
   (<o> ^name report-success)
}


sp {go-to-next-waypoint*apply*report-success
   (state <s> ^name go-to-next-waypoint
              ^operator.name report-success)
-->
   (<s> ^status complete)
}

sp {go-to-next-waypoint*apply*report-success*remove*position-set
   (state <s> ^name go-to-next-waypoint
              ^operator.name report-success
              ^current-action <a>)
   (<a> ^position-set <set>)
-->
   (<a> ^position-set <set> -)
}

sp {go-to-next-waypoint*apply*report-success*cleanup*command
   (state <s> ^name go-to-next-waypoint
              ^operator.name report-success
              ^io.output-link <out>
              ^current-action <a>)
   (<a> ^{ <cmd-type> << face-command drive-command >> } <cmd>)
   (<out> ^<cmd-name> <cmd>)
-->
   (<a> ^<cmd-type> <cmd> -)
   (<out> ^<cmd-name> <cmd> -)
}

sp {go-to-next-waypoint*apply*report-success*remove*next-waypoint
   (state <s> ^name go-to-next-waypoint
              ^operator.name report-success
              ^current-action <a>)
   (<a> ^next-waypoint <wp>)
-->
   (<a> ^next-waypoint <wp> -)
}
   
