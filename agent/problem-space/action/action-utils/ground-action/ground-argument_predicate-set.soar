###############################################################
#####                predicate-set                        #####

sp {ground-action*ground-argument*predicate-set*elaborate*pred-count
   (state <s> ^name ground-action
              ^ground-argument <arg>)
   (<arg> ^arg-type predicate-set
          ^generalized-rep.pred-count <c>)
-->
   (<arg> ^pred-count <c>)
}

# ENUMERATE: 1-5 predicates
sp {ground-action*ground-argument*expand*predicate-set*predicate*1
  (state <s> ^name ground-action
             ^ground-argument <arg>)
  (<arg> ^arg-type predicate-set
         ^generalized-rep.{1} <p1>)
-->
  (<s> ^ground-argument <gp1>)
  (<gp1> ^arg-type predicate
         ^generalized-rep <p1>)
  (<arg> ^ground-pred1 <gp1>)
}

sp {ground-action*ground-argument*expand*predicate-set*predicate*2
  (state <s> ^name ground-action
             ^ground-argument <arg>)
  (<arg> ^arg-type predicate-set
         ^generalized-rep.{2} <p2>)
-->
  (<s> ^ground-argument <gp2>)
  (<gp2> ^arg-type predicate
         ^generalized-rep <p2>)
  (<arg> ^ground-pred2 <gp2>)
}

sp {ground-action*ground-argument*expand*predicate-set*predicate*3
  (state <s> ^name ground-action
             ^ground-argument <arg>)
  (<arg> ^arg-type predicate-set
         ^generalized-rep.{3} <p3>)
-->
  (<s> ^ground-argument <gp3>)
  (<gp3> ^arg-type predicate
         ^generalized-rep <p3>)
  (<arg> ^ground-pred3 <gp3>)
}

sp {ground-action*ground-argument*expand*predicate-set*predicate*4
  (state <s> ^name ground-action
             ^ground-argument <arg>)
  (<arg> ^arg-type predicate-set
         ^generalized-rep.{4} <p4>)
-->
  (<s> ^ground-argument <gp4>)
  (<gp4> ^arg-type predicate
         ^generalized-rep <p4>)
  (<arg> ^ground-pred4 <gp4>)
}

sp {ground-action*ground-argument*expand*predicate-set*predicate*5
  (state <s> ^name ground-action
             ^ground-argument <arg>)
  (<arg> ^arg-type predicate-set
         ^generalized-rep.{5} <p5>)
-->
  (<s> ^ground-argument <gp5>)
  (<gp5> ^arg-type predicate
         ^generalized-rep <p5>)
  (<arg> ^ground-pred5 <gp5>)
}

# Propose ground-argument predicate-set
sp {ground-action*propose*ground-argument*predicate-set
  (state <s> ^name ground-action
             ^ground-argument <arg>)
  (<arg> ^arg-type predicate-set
        -^instance)
-->
  (<s> ^operator <o> + =)
  (<o> ^name ground-argument
       ^argument <arg>
       ^arg-type predicate-set)
}

# Reject ground-argument predicate-set if one of the predicates is still ungrounded
sp {ground-action*reject*ground-argument*predicate-set*ungrounded*pred
  (state <s> ^name ground-action
             ^operator <o> +)
  (<o> ^name ground-argument
       ^argument <arg>
       ^arg-type predicate-set)
  (<arg> ^<pred-num> <gp>)
  (<gp> ^arg-type predicate
       -^instance)
-->
  (<s> ^operator <o> -)
}

# ENUMERATE: 1-5 predicates
sp {ground-action*apply*ground-argument*predicate-set*1*predicate
   (state <s> ^name ground-action
              ^operator <o>)
   (<o> ^name ground-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 1
          ^ground-pred1.instance <p1>)
-->
   (<arg> ^instance <i>)
   (<i> ^pred-count 1
        ^1 <p1>)
}


sp {ground-action*apply*ground-argument*predicate-set*2*predicate
   (state <s> ^name ground-action
              ^operator <o>)
   (<o> ^name ground-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 2
          ^ground-pred1.instance <p1>
          ^ground-pred2.instance <p2>)
-->
   (<arg> ^instance <i>)
   (<i> ^pred-count 2
        ^1 <p1>
        ^2 <p2>)
}

sp {ground-action*apply*ground-argument*predicate-set*3*predicate
   (state <s> ^name ground-action
              ^operator <o>)
   (<o> ^name ground-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 3
          ^ground-pred1.instance <p1>
          ^ground-pred2.instance <p2>
          ^ground-pred3.instance <p3>)
-->
   (<arg> ^instance <i>)
   (<i> ^pred-count 3
        ^1 <p1>
        ^2 <p2>
        ^3 <p3>)
}

sp {ground-action*apply*ground-argument*predicate-set*4*predicate
   (state <s> ^name ground-action
              ^operator <o>)
   (<o> ^name ground-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 4
          ^ground-pred1.instance <p1>
          ^ground-pred2.instance <p2>
          ^ground-pred3.instance <p3>
          ^ground-pred4.instance <p4>)
-->
   (<arg> ^instance <i>)
   (<i> ^pred-count 4
        ^1 <p1>
        ^2 <p2>
        ^3 <p3>
        ^4 <p4>)
}

sp {ground-action*apply*ground-argument*predicate-set*5*predicate
   (state <s> ^name ground-action
              ^operator <o>)
   (<o> ^name ground-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 5
          ^ground-pred1.instance <p1>
          ^ground-pred2.instance <p2>
          ^ground-pred3.instance <p3>
          ^ground-pred4.instance <p4>
          ^ground-pred5.instance <p5>)
-->
   (<arg> ^instance <i>)
   (<i> ^pred-count 5
        ^1 <p1>
        ^2 <p2>
        ^3 <p3>
        ^4 <p4>
        ^5 <p5>)
}
