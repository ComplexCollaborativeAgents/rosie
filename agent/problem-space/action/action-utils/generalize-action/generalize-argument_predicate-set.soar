####################### predicate-set ###########################

sp {generalize-action*generalize-argument*predicate-set*elaborate*pred-count
   (state <s> ^name generalize-action
              ^generalize-argument <arg>)
   (<arg> ^arg-type predicate-set
          ^instance.pred-count <c>)
-->
   (<arg> ^pred-count <c>)
}

# ENUMERATE: 1-5 predicates
sp {generalize-action*generalize-argument*expand*predicate-set*predicate*1
   (state <s> ^name generalize-action
              ^generalize-argument <arg>)
   (<arg> ^arg-type predicate-set
          ^instance.{1} <p1>)
-->
   (<s> ^generalize-argument <gen-p1>)
   (<gen-p1> ^arg-type predicate
             ^instance <p1>)
   (<arg> ^generalize-pred1 <gen-p1>)
}

sp {generalize-action*generalize-argument*expand*predicate-set*predicate*2
   (state <s> ^name generalize-action
              ^generalize-argument <arg>)
   (<arg> ^arg-type predicate-set
          ^instance.{2} <p2>)
-->
   (<s> ^generalize-argument <gen-p2>)
   (<gen-p2> ^arg-type predicate
             ^instance <p2>)
   (<arg> ^generalize-pred2 <gen-p2>)
}

sp {generalize-action*generalize-argument*expand*predicate-set*predicate*3
   (state <s> ^name generalize-action
              ^generalize-argument <arg>)
   (<arg> ^arg-type predicate-set
          ^instance.{3} <p3>)
-->
   (<s> ^generalize-argument <gen-p3>)
   (<gen-p3> ^arg-type predicate
             ^instance <p3>)
   (<arg> ^generalize-pred3 <gen-p3>)
}

sp {generalize-action*generalize-argument*expand*predicate-set*predicate*4
   (state <s> ^name generalize-action
              ^generalize-argument <arg>)
   (<arg> ^arg-type predicate-set
          ^instance.{4} <p4>)
-->
   (<s> ^generalize-argument <gen-p4>)
   (<gen-p4> ^arg-type predicate
             ^instance <p4>)
   (<arg> ^generalize-pred4 <gen-p4>)
}

sp {generalize-action*generalize-argument*expand*predicate-set*predicate*5
   (state <s> ^name generalize-action
              ^generalize-argument <arg>)
   (<arg> ^arg-type predicate-set
          ^instance.{5} <p5>)
-->
   (<s> ^generalize-argument <gen-p5>)
   (<gen-p5> ^arg-type predicate
             ^instance <p5>)
   (<arg> ^generalize-pred5 <gen-p5>)
}

# Propose generalize-argument predicate-set
sp {generalize-action*propose*generalize-argument*predicate-set
  (state <s> ^name generalize-action
             ^generalize-argument <arg>)
  (<arg> ^arg-type predicate-set
        -^generalized-rep)
-->
  (<s> ^operator <o> + =)
  (<o> ^name generalize-argument
       ^argument <arg>
       ^arg-type predicate-set)
}

# Reject generalize-argument predicate-set if ungeneralized predicate
sp {generalize-action*reject*generalize-argument*predicate-set*ungeneralized*predicate
   (state <s> ^name generalize-action
              ^operator <o> +)
   (<o> ^name generalize-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^<pred-num> <pred>)
   (<pred> ^arg-type predicate
          -^generalized-rep)
-->
   (<s> ^operator <o> -)
}

# ENUMERATE: 1-5 predicates

sp {generalize-action*apply*generalize-argument*predicate-set*1
   (state <s> ^name generalize-action
              ^operator <o>)
   (<o> ^name generalize-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 1
          ^generalize-pred1.generalized-rep <rep1>)
-->
   (<arg> ^generalized-rep <rep>)
   (<rep> ^pred-count 1
          ^1 <rep1>)
}

sp {generalize-action*apply*generalize-argument*predicate-set*2
   (state <s> ^name generalize-action
              ^operator <o>)
   (<o> ^name generalize-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 2
          ^generalize-pred1.generalized-rep <rep1>
          ^generalize-pred2.generalized-rep <rep2>)
-->
   (<arg> ^generalized-rep <rep>)
   (<rep> ^pred-count 2
          ^1 <rep1>
          ^2 <rep2>)
}

sp {generalize-action*apply*generalize-argument*predicate-set*3
   (state <s> ^name generalize-action
              ^operator <o>)
   (<o> ^name generalize-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 3
          ^generalize-pred1.generalized-rep <rep1>
          ^generalize-pred2.generalized-rep <rep2>
          ^generalize-pred3.generalized-rep <rep3>)
-->
   (<arg> ^generalized-rep <rep>)
   (<rep> ^pred-count 3
          ^1 <rep1>
          ^2 <rep2>
          ^3 <rep3>)
}

sp {generalize-action*apply*generalize-argument*predicate-set*4
   (state <s> ^name generalize-action
              ^operator <o>)
   (<o> ^name generalize-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 4
          ^generalize-pred1.generalized-rep <rep1>
          ^generalize-pred2.generalized-rep <rep2>
          ^generalize-pred3.generalized-rep <rep3>
          ^generalize-pred4.generalized-rep <rep4>)
-->
   (<arg> ^generalized-rep <rep>)
   (<rep> ^pred-count 4
          ^1 <rep1>
          ^2 <rep2>
          ^3 <rep3>
          ^4 <rep4>)
}

sp {generalize-action*apply*generalize-argument*predicate-set*5
   (state <s> ^name generalize-action
              ^operator <o>)
   (<o> ^name generalize-argument
        ^argument <arg>
        ^arg-type predicate-set)
   (<arg> ^pred-count 5
          ^generalize-pred1.generalized-rep <rep1>
          ^generalize-pred2.generalized-rep <rep2>
          ^generalize-pred3.generalized-rep <rep3>
          ^generalize-pred4.generalized-rep <rep4>
          ^generalize-pred5.generalized-rep <rep5>)
-->
   (<arg> ^generalized-rep <rep>)
   (<rep> ^pred-count 5
          ^1 <rep1>
          ^2 <rep2>
          ^3 <rep3>
          ^4 <rep4>
          ^5 <rep5>)
}

