sp {state*no-change*copy-desired*elaborate*copy-desired-workspace
   (state <s> ^superstate.copy-desired <des>
              ^impasse no-change
              ^attribute state)
-->
   (<s> ^copy-desired-workspace <ws>)
   (<ws> ^source-desired <des>)
}

sp {action-utils*copy-desired*elaborate*name*learn-copy-desired-elaboration-rule
   (state <s> ^copy-desired-workspace <ws>)
-->
   (<s> ^name learn-copy-desired-elaboration-rule)
}

sp {learn-copy-desired-elaborate-rule*elaborate*copy-desired*was-copied*true
   (state <s> ^copy-desired-workspace <ws>
              ^superstate.desired.duplicate-of <des>)
   (<ws> ^source-desired <des>)
-->
   (<ws> ^was-copied true)
}

sp {action-utils*copy-desired*elaborate*object-map*superoperator
   (state <s> ^copy-desired-workspace <ws>
              ^superstate.deep-copy-world.copy-objects-map <map>)
-->
   (<ws> ^object-map <map>)
}

sp {action-utils*copy-desired*elaborate*learning-action-utils-rule
   (state <s> ^name learn-copy-desired-elaboration-rule
              ^copy-desired-workspace <ws>)
   (<ws> -^was-copied true)
-->
   (<s> ^learning-action-utils-rule true)
}

# ENUMERATE: Goals with up to 5 levels (predicate-sets)

sp {action-utils*copy-desired*elaborate*predicate-sets*1
   (state <s> ^copy-desired-workspace <ws>)
   (<ws> ^source-desired <ps1>)
   (<ps1> ^next none)
--> 
   (<ws> ^num-sets 1
         ^predicate-set <cp1>)
   (<cp1> ^num 1 ^source-pred-set <ps1>)
}

sp {action-utils*copy-desired*elaborate*predicate-sets*2
   (state <s> ^copy-desired-workspace <ws>)
   (<ws> ^source-desired <ps1>)
   (<ps1> ^next <ps2>)
   (<ps2> ^next none)
--> 
   (<ws> ^num-sets 2
         ^predicate-set <cp1> <cp2>)
   (<cp1> ^num 1 ^source-pred-set <ps1>)
   (<cp2> ^num 2 ^source-pred-set <ps2>)
}

sp {action-utils*copy-desired*elaborate*predicate-sets*3
   (state <s> ^copy-desired-workspace <ws>)
   (<ws> ^source-desired <ps1>)
   (<ps1> ^next <ps2>)
   (<ps2> ^next <ps3>)
   (<ps3> ^next none)
--> 
   (<ws> ^num-sets 3
         ^predicate-set <cp1> <cp2> <cp3>)
   (<cp1> ^num 1 ^source-pred-set <ps1>)
   (<cp2> ^num 2 ^source-pred-set <ps2>)
   (<cp3> ^num 3 ^source-pred-set <ps3>)
}

sp {action-utils*copy-desired*elaborate*predicate-sets*4
   (state <s> ^copy-desired-workspace <ws>)
   (<ws> ^source-desired <ps1>)
   (<ps1> ^next <ps2>)
   (<ps2> ^next <ps3>)
   (<ps3> ^next <ps4>)
   (<ps4> ^next none)
--> 
   (<ws> ^num-sets 4
         ^predicate-set <cp1> <cp2> <cp3> <cp4>)
   (<cp1> ^num 1 ^source-pred-set <ps1>)
   (<cp2> ^num 2 ^source-pred-set <ps2>)
   (<cp3> ^num 3 ^source-pred-set <ps3>)
   (<cp4> ^num 4 ^source-pred-set <ps4>)
}

sp {action-utils*copy-desired*elaborate*predicate-sets*5
   (state <s> ^copy-desired-workspace <ws>)
   (<ws> ^source-desired <ps1>)
   (<ps1> ^next <ps2>)
   (<ps2> ^next <ps3>)
   (<ps3> ^next <ps4>)
   (<ps4> ^next <ps5>)
   (<ps5> ^next none)
--> 
   (<ws> ^num-sets 5
         ^predicate-set <cp1> <cp2> <cp3> <cp4> <cp5>)
   (<cp1> ^num 1 ^source-pred-set <ps1>)
   (<cp2> ^num 2 ^source-pred-set <ps2>)
   (<cp3> ^num 3 ^source-pred-set <ps3>)
   (<cp4> ^num 4 ^source-pred-set <ps4>)
   (<cp5> ^num 5 ^source-pred-set <ps5>)
}


# elaborate individual predicate information 
## ENUMERATE: 1-5 predicates

sp {action-utils*copy-desired*elaborate*predicates*0*preds
   (state <s> ^copy-desired-workspace.predicate-set <pset>)
   (<pset> ^source-pred-set <sps>)
   (<sps> ^pred-count 0)
--> 
   (<pset> ^pred-count 0)
}

sp {action-utils*copy-desired*elaborate*predicates*1*preds
   (state <s> ^copy-desired-workspace.predicate-set <pset>)
   (<pset> ^source-pred-set <sps>)
   (<sps> ^pred-count 1
          ^predicate1 <p1>)
--> 
   (<pset> ^pred-count 1
           ^copy-predicate <cp1>)
   (<cp1> ^num 1 ^source-pred <p1>)
}

sp {action-utils*copy-desired*elaborate*predicates*2*preds
   (state <s> ^copy-desired-workspace.predicate-set <pset>)
   (<pset> ^source-pred-set <sps>)
   (<sps> ^pred-count 2
          ^predicate1 <p1>
          ^predicate2 <p2>)
--> 
   (<pset> ^pred-count 2
           ^copy-predicate <cp1> <cp2>)
   (<cp1> ^num 1 ^source-pred <p1>)
   (<cp2> ^num 2 ^source-pred <p2>)
}

sp {action-utils*copy-desired*elaborate*predicates*3*preds
   (state <s> ^copy-desired-workspace.predicate-set <pset>)
   (<pset> ^source-pred-set <sps>)
   (<sps> ^pred-count 3
          ^predicate1 <p1>
          ^predicate2 <p2>
          ^predicate3 <p3>)
--> 
   (<pset> ^pred-count 3
           ^copy-predicate <cp1> <cp2> <cp3>)
   (<cp1> ^num 1 ^source-pred <p1>)
   (<cp2> ^num 2 ^source-pred <p2>)
   (<cp3> ^num 3 ^source-pred <p3>)
}

sp {action-utils*copy-desired*elaborate*predicates*4*preds
   (state <s> ^copy-desired-workspace.predicate-set <pset>)
   (<pset> ^source-pred-set <sps>)
   (<sps> ^pred-count 4
          ^predicate1 <p1>
          ^predicate2 <p2>
          ^predicate3 <p3>
          ^predicate4 <p4>)
--> 
   (<pset> ^pred-count 4
           ^copy-predicate <cp1> <cp2> <cp3> <cp4>)
   (<cp1> ^num 1 ^source-pred <p1>)
   (<cp2> ^num 2 ^source-pred <p2>)
   (<cp3> ^num 3 ^source-pred <p3>)
   (<cp4> ^num 4 ^source-pred <p4>)
}


sp {action-utils*copy-desired*elaborate*predicates*5*preds
   (state <s> ^copy-desired-workspace.predicate-set <pset>)
   (<pset> ^source-pred-set <sps>)
   (<sps> ^pred-count 5
          ^predicate1 <p1>
          ^predicate2 <p2>
          ^predicate3 <p3>
          ^predicate4 <p4>
          ^predicate5 <p5>)
--> 
   (<pset> ^pred-count 5
           ^copy-predicate <cp1> <cp2> <cp3> <cp4> <cp5>)
   (<cp1> ^num 1 ^source-pred <p1>)
   (<cp2> ^num 2 ^source-pred <p2>)
   (<cp3> ^num 3 ^source-pred <p3>)
   (<cp4> ^num 4 ^source-pred <p4>)
   (<cp5> ^num 5 ^source-pred <p5>)
}
