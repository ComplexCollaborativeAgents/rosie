sp {op_repeat*propose*add-until-clause
   (state <s> ^name op_repeat1
              ^task-operator.until-clause <until>
             -^added-clause <until>)
-->
   (<s> ^operator <o> +)
   (<o> ^name add-until-clause
        ^until-clause <until>)
}

sp {op_repeat*apply*add-until-clause*parent-task
   (state <s> ^name op_repeat1
              ^operator <o>
              ^parent-task-segment.task-operator <par-task>)
   (<o> ^name add-until-clause
        ^until-clause <until>)
-->
   (<par-task> ^until-clause <until>)
   (<s> ^added-clause <until>)
}

sp {op_repeat*apply*add-until-clause*parent-segment*repeat-to-goal
   (state <s> ^name op_repeat1
              ^operator.name add-until-clause
              ^parent-task-segment <seg>)
   (<seg> ^task-operator.current-goal <goal-handle>)
-->
   (<seg> ^repeat-to-goal <goal-handle>)
}
