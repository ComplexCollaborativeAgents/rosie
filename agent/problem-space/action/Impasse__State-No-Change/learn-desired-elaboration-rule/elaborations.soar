sp {learn-desired-elaboration-rule*elaborate*state*name*instantiate-task-operator
   (state <s> ^name learn-desired-elaboration-rule)
-->
   (<s> ^name instantiate-task-operator)
}

sp {learn-desired-elaboration-rule*elaborate*task-operator*from*superstate
   (state <s> ^name learn-desired-elaboration-rule
              ^superstate.task-operator <task-op>)
-->
   (<s> ^task-operator <task-op>)
}

sp {learn-desired-elaboration-rule*elaborate*smem-info
   (state <s> ^name learn-desired-elaboration-rule
              ^task-concept-network <tcn>
              ^task-operator.current-subgoal <subgoal-handle>)
   (<tcn> ^goal <goal>
          ^procedural <proc>)
   (<goal> ^<sg-num> <subgoal>)
   (<subgoal> ^handle <subgoal-handle>)
-->
   (<s> ^goal-id <subgoal>)
   (<s> ^procedural-id <proc>)
}

sp {learn-desired-elaboration-rule*elaborate*instantiate-task-operator*reference*info
   (state <s> ^name learn-desired-elaboration-rule
              ^procedural-id <proc-id>
              ^task-operator <task-op>)
-->
   (<s> ^reference-tcn-proc <proc-id>
        ^reference-task-op <task-op>)
}

sp {learn-desired-elaboration-rule*elaborate*instantiate-task-argument*predicate-set
   (state <s> ^name learn-desired-elaboration-rule
              ^goal-id <gid>)
-->
   (<s> ^instantiate-task-argument <ga>)
   (<ga> ^arg-type predicate-set
         ^generalized-rep <gid>)
}

sp {learn-desired-elaboration-rule*elaborate*desired*grounded
   (state <s> ^name learn-desired-elaboration-rule
              ^instantiate-task-argument <ga>
              ^goal-id <gid>)
   (<ga> ^generalized-rep <gid>
         ^instantiation <des>)
   (<gid> ^handle <h>)
-->
   (<s> ^desired <des>)
   (<des> ^item-type task-subgoal
          ^handle <h>)
}

sp {learn-desired-elaboration-rule*elaborate*goal-predicate*item-type
   (state <s> ^name learn-desired-elaboration-rule
              ^instantiate-task-argument <ga>)
   (<ga> ^arg-type predicate
         ^instantiation <i>)
-->
   (<i> ^item-type goal-predicate)
}

# ENUMERATE 1-5 subgoals
#sp {learn-desired-elaboration-rule*elaborate*instantiate-task-argument*predicate-set*subgoal*1
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id.{1} <g1>)
#-->
#   (<s> ^instantiate-task-argument <ga1>
#        ^subgoal1 <ga1>)
#   (<ga1> ^arg-type predicate-set
#          ^generalized-rep <g1>)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*instantiate-task-argument*predicate-set*subgoal*2
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id.{2} <g2>)
#-->
#   (<s> ^instantiate-task-argument <ga2>
#        ^subgoal2 <ga2>)
#   (<ga2> ^arg-type predicate-set
#          ^generalized-rep <g2>)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*instantiate-task-argument*predicate-set*subgoal*3
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id.{3} <g3>)
#-->
#   (<s> ^instantiate-task-argument <ga3>
#        ^subgoal3 <ga3>)
#   (<ga3> ^arg-type predicate-set
#          ^generalized-rep <g3>)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*instantiate-task-argument*predicate-set*subgoal*4
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id.{4} <g4>)
#-->
#   (<s> ^instantiate-task-argument <ga4>
#        ^subgoal4 <ga4>)
#   (<ga4> ^arg-type predicate-set
#          ^generalized-rep <g4>)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*instantiate-task-argument*predicate-set*subgoal*5
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id.{5} <g5>)
#-->
#   (<s> ^instantiate-task-argument <ga5>
#        ^subgoal5 <ga5>)
#   (<ga5> ^arg-type predicate-set
#          ^generalized-rep <g5>)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*instantiate-task-argument*predicate*instantiation*item-type*goal-predicate
#   (state <s> ^name learn-desired-elaboration-rule
#              ^instantiate-task-argument <arg>)
#   (<arg> ^arg-type predicate
#          ^instantiation <i>)
#-->
#   (<i> ^item-type goal-predicate)
#}
#
## ENUMERATE: 1-5 subgoals
#
#sp {learn-desired-elaboration-rule*elaborate*desired*1*subgoal
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id <gid>
#              ^subgoal1.instantiation <g1>)
#   (<gid> ^handle <goal-handle>
#          ^subgoal-count 1)
#-->
#   (<s> ^desired <des>)
#   (<des> ^handle <goal-handle>
#          ^item-type task-goal
#          ^subgoal-count 1
#          ^1 <g1>)
#   (<g1> ^item-type task-subgoal)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*desired*2*subgoal
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id <gid>
#              ^subgoal1.instantiation <g1>
#              ^subgoal2.instantiation <g2>)
#   (<gid> ^handle <goal-handle>
#          ^subgoal-count 2)
#-->
#   (<s> ^desired <des>)
#   (<des> ^handle <goal-handle>
#          ^item-type task-goal
#          ^subgoal-count 2
#          ^1 <g1>
#          ^2 <g2>)
#   (<g1> ^item-type task-subgoal)
#   (<g2> ^item-type task-subgoal)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*desired*3*subgoal
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id <gid>
#              ^subgoal1.instantiation <g1>
#              ^subgoal2.instantiation <g2>
#              ^subgoal3.instantiation <g3>)
#   (<gid> ^handle <goal-handle>
#          ^subgoal-count 3)
#-->
#   (<s> ^desired <des>)
#   (<des> ^handle <goal-handle>
#          ^item-type task-goal
#          ^subgoal-count 3
#          ^1 <g1>
#          ^2 <g2>
#          ^3 <g3>)
#   (<g1> ^item-type task-subgoal)
#   (<g2> ^item-type task-subgoal)
#   (<g3> ^item-type task-subgoal)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*desired*4*subgoal
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id <gid>
#              ^subgoal1.instantiation <g1>
#              ^subgoal2.instantiation <g2>
#              ^subgoal3.instantiation <g3>
#              ^subgoal4.instantiation <g4>)
#   (<gid> ^handle <goal-handle>
#          ^subgoal-count 4)
#-->
#   (<s> ^desired <des>)
#   (<des> ^handle <goal-handle>
#          ^item-type task-goal
#          ^subgoal-count 4
#          ^1 <g1>
#          ^2 <g2>
#          ^3 <g3>
#          ^4 <g4>)
#   (<g1> ^item-type task-subgoal)
#   (<g2> ^item-type task-subgoal)
#   (<g3> ^item-type task-subgoal)
#   (<g4> ^item-type task-subgoal)
#}
#
#sp {learn-desired-elaboration-rule*elaborate*desired*5*subgoal
#   (state <s> ^name learn-desired-elaboration-rule
#              ^goal-id <gid>
#              ^subgoal1.instantiation <g1>
#              ^subgoal2.instantiation <g2>
#              ^subgoal3.instantiation <g3>
#              ^subgoal4.instantiation <g4>
#              ^subgoal5.instantiation <g5>)
#   (<gid> ^handle <goal-handle>
#          ^subgoal-count 5)
#-->
#   (<s> ^desired <des>)
#   (<des> ^handle <goal-handle>
#          ^item-type task-goal
#          ^subgoal-count 5
#          ^1 <g1>
#          ^2 <g2>
#          ^3 <g3>
#          ^4 <g4>
#          ^5 <g5>)
#   (<g1> ^item-type task-subgoal)
#   (<g2> ^item-type task-subgoal)
#   (<g3> ^item-type task-subgoal)
#   (<g4> ^item-type task-subgoal)
#   (<g5> ^item-type task-subgoal)
#}
#
