sp {learn-select-next-goal-rule*propose*propose-select-next-goal
   (state <s> ^name learn-select-next-goal-rule
              ^next-goal-link.goal.handle <goal-h>
              ^can-select-goal true)
-->
   (<s> ^operator <o> +)
   (<o> ^name propose-select-next-goal
        ^next-goal-handle <goal-h>)
}

### Learn a proposal rule for select-next-goal

sp {__SEL_NEXT_GOAL__*propose*select-next-goal*superstate
   (state <s> ^name learn-select-next-goal-rule
              ^operator <o>
             -^conditions
             -^dont-chunk true
              ^superstate.superstate <ss>)
   (<o> ^name propose-select-next-goal
        ^next-goal-handle <goal-h>)
#   (<ss> ^problem-space.subproblem execute)
-->
   (<ss> ^operator <ssop> + =)
   (<ssop> ^name select-next-goal
           ^next-goal-handle <goal-h>)
}

sp {__SEL_NEXT_GOAL__*propose*select-next-goal*superstate*conditions
   (state <s> ^name learn-select-next-goal-rule
              ^operator <o>
              ^conditions <c>
             -^dont-chunk true
              ^superstate.superstate <ss>)
   (<o> ^name propose-select-next-goal
        ^next-goal-handle <goal-h>)
#   (<ss> ^problem-space.subproblem execute)
-->
   (<ss> ^operator <ssop> + =)
   (<ssop> ^name select-next-goal
           ^has-conditions true
           ^next-goal-handle <goal-h>)
}

### If we shouldn't chunk the rule, check for quiescence
         
sp {learn-select-next-goal-rule*apply*propose-select-next-goal*dont-chunk
   (state <s> ^name learn-select-next-goal-rule
              ^operator <o>
              ^quiescence t
             -^conditions
              ^dont-chunk true
              ^superstate.superstate <ss>)
   (<o> ^name propose-select-next-goal
        ^next-goal-handle <goal-h>)
#   (<ss> ^problem-space.subproblem execute)
-->
   (<ss> ^operator <ssop> + =)
   (<ssop> ^name select-next-goal
           ^next-goal-handle <goal-h>)
}

sp {learn-select-next-goal-rule*apply*propose-select-next-goal*conditions*dont-chunk
   (state <s> ^name learn-select-next-goal-rule
              ^operator <o>
              ^quiescence t
              ^conditions <c>
              ^dont-chunk true
              ^superstate.superstate <ss>)
   (<o> ^name propose-select-next-goal
        ^next-goal-handle <goal-h>)
#   (<ss> ^problem-space.subproblem execute)
-->
   (<ss> ^operator <ssop> + =)
   (<ssop> ^name select-next-goal
           ^has-conditions true
           ^next-goal-handle <goal-h>)
}
         

