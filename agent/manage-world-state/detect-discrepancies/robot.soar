
########################################################
# Change: changed-waypoint
#    Occurs when the robot's current waypoint changes
#      on the input-link
########################################################

sp {top-state*perception-monitor*change-info*elaborate*changed-waypoint
   (state <s> ^top-state <s>
              ^perception-monitor.change-info <info>)
-->
   (<info> ^change <changed-waypoint>)
   (<changed-waypoint> ^type changed-waypoint
                       ^category robot
                       ^op-name attend-to-changed-waypoint)
}

sp {top-state*perception-monitor*robot-monitor*elaborate*change*new-waypoint
   (state <s> ^top-state <s>
              ^world.robot <robot>
              ^perception-monitor.input-link.self.current-waypoint.waypoint-handle <wp-handle>
              ^perception-monitor.changes <changes>)
   (<robot> -^current-waypoint.handle <wp-handle>)
-->
   (<changes> ^change <change>)
   (<change> ^type changed-waypoint
             ^new-waypoint-handle <wp-handle>)
}
