### merge-belief-objects
# If the object matches an existing object, then merge them together

sp {attend-to-perception*new-belief-object*propose*change-world-state*merge-belief-objects
   (state <s> ^name attend-to-perception
              ^discrepancy-type new-belief-object
              ^matches-existing-object { <core-obj> <> none }
              ^object-info <obj-info>)
-->
   (<s> ^operator <o> +)
   (<o> ^name change-world-state
        ^merge-belief-objects <merge>)
   (<merge> ^core-object-info <core-obj>
            ^merging-object-info <obj-info>)
}



sp {sanitize-object-argument*elaborate*world-obj*from*world
   (state <s> ^name sanitize-object-argument
              ^constructed-obj <wobj>
              ^top-state.world.objects.object <wobj>)
-->
   (<s> ^world-obj <wobj>)
}

sp {sanitize-object-argument*elaborate*world-obj*matching*handle
   (state <s> ^name sanitize-object-argument
              ^constructed-obj.handle <h>
              ^top-state.world.objects.object <wobj>)
   (<wobj> ^handle <h>)
-->
   (<s> ^world-obj <wobj>)
}

sp {sanitize-object-argument*elaborate*world-obj*from*merged-obj
   (state <s> ^name sanitize-object-argument
              ^constructed-obj.merged-into <wobj>
              ^top-state.world.objects.object <wobj>)
-->
   (<s> ^world-obj <obj>)
}

sp {sanitize-object-argument*propose*change-world-state*add-object-to-world
   (state <s> ^name sanitize-object-argument
              ^constructed-obj <obj>
             -^world-obj <wobj>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name change-world-state
        ^add-object-to-world <add>)
   (<add> ^object <obj>)
}
